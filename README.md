# send-allure-results-action

Sends individual json files to allure server, using [fescobar/allure-docker-service](https://github.com/fescobar/allure-docker-service), potentially cleans and generates results.
It can be used with secured docker service.

The action assumes that allure-results folder is being generated by the test run.

## Inputs

### `allure-server-url`

**Required** The url of the deployed docker Allure Server

---

### `allure-results-directory`

**Required** The `allure-results/` directory where the test run generated the results. Default: `./allure-results`

---

### `project-id`

**Required** The ID of your project. Default: `default`

---

### `is-secure`

**Required** If the docker service env. variable is set to `SECURITY_ENABLED: 1` set this to `true`. Otherwise set it to `false`. Default: `true`

---

### `security-user`

If `is-secure` is set to `true`. Define the security user name. Default: `admin`

---

### `security-pass`

If `is-secure` is set to `true`. Define the security user password. Default: `password`

---

### `allure-generate`

If the report has to be manually generated, set it to `true`. Default: `false`

---

### `allure-clean-results`

If the results have to be cleaned before sending a new result, set it to true. Default: `true`

## Example to be used in workflow file

```yml
- name: Send Results to Allure Server and Generate Allure Report
  uses: robkatona/send-allure-results-action@1
  # always() needed because we want report for failed tests as well
  if: ${{ always() }}
  with:
    allure-server-url: "https:my_allure_server_backend:5050"
    allure-results-directory: ./allure-results
    project-id: my-project
    is-secure: true
    # Always store your credentials securely
    security-user: ${{ secrets.ALLURE_ADMIN_USERNAME }}
    security-pass: ${{ secrets.ALLURE_ADMIN_PASSWORD }}
    allure-generate: false
    allure-clean-results: true
```
